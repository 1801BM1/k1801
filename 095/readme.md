## 1801ВП1-095	

### Фотографии кристалла высокого разрешения
[1801ВП1-095, 327M](http://www.1801bm1.com/files/retro/1801/images/vp1-095.jpg)

### Условное графическое обозначение
![Symbol](/095/img/095.png)

### Назначение выводов 
| Номер       | Название     | Конфигурация | Назначение
|-------------|--------------|--------------|-----------------------------------------
| 1           | RC1          | Вход         | Конфигурация, выбор базовых адресов и вектора прерываний
| 2           | RC0          | Вход         | Конфигурация, выбор режима младшего (низкий уровень) и старшего (высокий уровень) байтов
| 4           | nSYNCC       | Вход         | Строб адреса центральной шины МПИ
| 5           | nDLA         | Вход         | Выдача адреса на центральную шину МПИ в режиме прямого доступа
| 14          | nDLD         | Вход         | Выдача данных на центральную шину МПИ в режиме прямого доступа
| 15          | nWWC         | Вход         | Запись данных с центральной шины МПИ во внутренние регистры
| 16          | nRDC         | Вход         | Чтение данных на центральную шину МПИ из внутренних регистров
| 20          | nCMPC        | Выход        | Выход дешифратора адреса на центральной шине МПИ
| 21          | GND          | Питание      | Нулевой потенциал (земля)
| 22          | nCMPP        | Выход        | Выход дешифратора адреса на периферийной шине МПИ
| 25          | nBSO         | Выход        | Выход выбора внешнего устройства на центральной шине МПИ
| 26          | nRDP         | Вход         | Чтение данных на периферийную шину МПИ из внутренних регистров
| 27          | nWWP         | Вход         | Запись данных с периферийной шины МПИ во внутренние регистры
| 36          | nCLD         | Вход         | Чтение данных с центральной шины МПИ в режиме прямого доступа
| 37          | nINITP       | Вход         | Аппаратный сброс со стороны периферийного процессора
| 38          | nSYNCP       | Вход         | Строб адреса периферийной шины МПИ
| 40          | nA1P         | Вход         | Разряд адреса A1 перифейриной шины МПИ для декодирования адреса внутреннего регистра
| 41          | RC2          | Вход         | Конфигурация, выбор базовых адресов и вектора прерываний
| 42          | VCC          | Питание      | Потенциал +5В (источник питания)

### Назначение выводов для режима младшего байта (RC0=0)
| Номер       | Название     | Конфигурация | Назначение
|-------------|--------------|--------------|-----------------------------------------
| 3           | nDLV         | Вход         | Выдача вектора прерывания на центральную МПИ
| 6-13        | nADC0-nADC7  | Вход/Вых OK  | Адрес/данные AD0-AD7 центральной шины МПИ
| 17-19       | nAC16-nAC18  | Вход/Вых OK  | Адрес A16-A18 центральной шины МПИ
| 23          | nRQ          | Выход        | Запрос на прерывание центрального процессора
| 28-35       | nADP7-nADP0  | Вход/Вых OK  | Адрес/данные AD7-AD0 периферийной шины МПИ
| 39          |              | Вход         | Не используется

### Назначение выводов для режима старшего байта (RC0=1)
| Номер       | Название     | Конфигурация | Назначение
|-------------|--------------|--------------|-----------------------------------------
| 3           | nA1C         | Вход         | Разряд адреса A1 центральной шины МПИ для декодирования адреса внутреннего регистра
| 6-13        | nADC8-nADC15 | Вход/Вых OK  | Адрес/данные AD8-AD15 центральной шины МПИ
| 17-19       | nAC19-nAC21  | Вход/Вых OK  | Адрес A19-A21 центральной шины МПИ
| 23          | nWD          | Выход        | Запрос арбитража центральной шины МПИ для предоставления прямого доступа
| 28-35       | nADP15-nADP8 | Вход/Вых OK  | Адрес/данные AD15-AD8 периферийной шины МПИ
| 39          | nBSI         | Вход         | Выбор периферийного устройства

### Структурная схема 1801ВП1-095
![Struct](/095/img/struct_095.png)

### Описание
На микросхемах 1801ВП1-095, 1801ВП1-096 и 1801ВП1-128 реализована интерфейсная
часть программируемого контроллера НГМД, известного как MY, причем микросхемы
1801ВП1-095 и 1801ВП1-096 реализуют интерфейс контроллера с системной шиной МПИ,
а микросхема 1801ВП1-128 выполняет функции интерфейса накопителя.

Микросхема 1801ВП1-095 представляет собой регистровую часто контроллера и
предназначена для временного хранения младшего и старшего байтов команд и
данных и передачи их в сторону центральной или периферийной шин МПИ.

В зависимости от входного сигнала RC0 микросхема может работать в двух
режимах: младшего байта при RC0=0 и старшего байта при RC0=0. Пара микросхем,
работающие в разных режимах образуют полноценный шестнадцабитный мост с
внутренними шестнадцатибитными регистрами.

В состеве микросхема можно выделить следующие функциональные элементы:
- блок управления
- блок регистров
- коммутатор магистралей
- блок формирования адреса вектора прерываний центрального процессора
- дешифратор адреса центрального процессора
- дешифратор адреса периферийного процессора
- блок формирования запроса на прерывание
- блок формирования требования доступа к ценральной шине МПИ
- блок формирования признака обращения к внешнему устройству

Взаимодействие контроллера с центральным процессором осуществляется с
помощью блока регистров, который содержит три регистра: адреса, данных
и состояния.

#### Регистр управления и состояния (чтение/запись), смещение +0
| Бит | ЦП | ПП | Описание
|-----|----|----|---------------------------------------------------------------
| 0   | 0w | r- | GO, запись единицы инициирует выполнение команды
| 1   | 0w | r- | F1, код команды для выполнения контроллером, разряд 0
| 2   | 0w | r- | F2, код команды для выполнения контроллером, разряд 1
| 3   | 0w | r- | F3, код команды для выполнения контроллером, разряд 2
| 4   | 0w | r- | F4, код команды для выполнения контроллером, разряд 3
| 5   | r- | rw | DONE, контроллер завершил исполнение команды и готов к выполнению новой, сбрасывается в ноль при записи единицы в разряд GO
| 6   | rw | r- | IE, разрешение прерываний при завершении выполнения команды
| 7   | r- | rw | TR, требование записать регистр данных, сбрасывается в ноль при записи регистра данных
| 8   | 0w | r- | A16, старшие разряды адреса
| 9   | 0w | r- | A17, старшие разряды адреса
| 10  | 0w | r- | A18, старшие разряды адреса
| 11  | 0w | r- | A19, старшие разряды адреса
| 12  | 0w | r- | A20, старшие разряды адреса
| 13  | 0w | r- | A21, старшие разряды адреса
| 14  | 0w | r- | INIT, инициализация контроллера
| 15  | r- | rw | ERR, признак ошибки выполнения команды

#### Область прямого доступа
В адресном пространстве перифейриного процессора выделяется область
размером 40000<sub>8</sub> байт (16К) по базовому адресу 
040000<sub>8</sub> или 100000<sub>8</sub> в зависимости от конфигурации.
При обращении периферийного процессора по адресу в этой области происходит
выставление запроса на прямой доступ по центральной шине МПИ и на этой шине
фактически выполняется чтения или запись, запрошенные перифейриным процессором.
Млашие 14 бит адреса дл ятранзакции беруться из 14 младших разрядов адреса 
обращения к выделенной области, старшие 8 бит адреса (полный адрес на
центральной шине МПИ 22-битный) беруться из младших разрядов регистра данных.

#### Адрес и вектор прерывания на центральной шине МПИ
| RC2-RC1 | Центральный адрес    | Вектор прерывания
|---------|----------------------|----------------------
| 00      | 17772140<sub>8</sub> | 170<sub>8</sub>
| 01      | 17772144<sub>8</sub> | 174<sub>8</sub>
| 10      | 17772150<sub>8</sub> | 150<sub>8</sub>
| 11      | 17772154<sub>8</sub> | 154<sub>8</sub>

#### Адрес и область прямого доступа на периферийной шине МПИ
| RC2-RC1 | Периферийный адрес | Область прямого доступа
|---------|--------------------|-------------------------
| 00      | 177100<sub>8</sub> | 040000<sub>8</sub>
| 01      | 177104<sub>8</sub> | 100000<sub>8</sub>
| 10      | 177100<sub>8</sub> | 040000<sub>8</sub>
| 11      | 177104<sub>8</sub> | 100000<sub>8</sub>
